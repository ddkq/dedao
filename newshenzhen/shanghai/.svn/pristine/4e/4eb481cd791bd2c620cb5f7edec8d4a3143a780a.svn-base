<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<style>
	form .age span, form .condition span {
		width: 22%;
		background-color: #777;
		font-size: .9rem;
	}
	form .condition span {
		font-size: .8rem;
		width: 18%;
	}
	form .condition .bottom-span {
		width: auto;
	}
	form p {
		color: #666;
	}
</style>
<body>
	<form action="" class="mb-4">
		<p class="mt-3 mb-2">我的年龄：</p>
		<p class="d-flex age justify-content-between text-center pl-3 pr-3">
			<span class="d-inline-block text-white pt-2 pb-2 active">30-40岁</span>
			<span class="d-inline-block text-white pt-2 pb-2">40-50岁</span>
			<span class="d-inline-block text-white pt-2 pb-2">50-60岁</span>
			<span class="d-inline-block text-white pt-2 pb-2">60岁以上</span>
			<input type="hidden" name="data[age]" value="30-40岁">
		</p>
		<p class="mb-2">牙齿情况：</p>
		<p class="d-flex flex-wrap justify-content-between text-center condition">
			<span class="text-white pt-2 pb-2 active">缺门牙</span>
			<span class="text-white pt-2 pb-2">缺大牙</span>
			<span class="text-white pt-2 pb-2">多颗缺牙</span>
			<span class="text-white pt-2 pb-2">半口缺牙</span>
			<span class="text-white pt-2 pb-2">全口缺牙</span>
			<span class="text-white pt-2 pb-2 mt-3 bottom-span pl-2 pr-2 ml-2">烤瓷牙失败</span>
			<span class="text-white pt-2 pb-2 mt-3 bottom-span pl-2 pr-2">常年佩戴假牙/义齿</span>
			<span class="text-white pt-2 pb-2 mt-3 bottom-span pl-2 pr-2 mr-2">牙齿其他情况</span>
			<input type="hidden" name="data[symptom]" value="缺门牙">
		</p>
		<input type="text" placeholder="输入姓名:" class="w-100 pt-2 pb-2 name" name="data[name]">
		<input type="text" placeholder="输入电话申请领取凭证：" class="w-100 pt-2 pb-2 mt-2 phone" name="data[phone]">
		<input type="hidden" name="table_id" value="47" />
		<input type="hidden" name="page" class="page" />
		<input type="hidden" name="code" value="{$code = mt_rand(0,1000000)}">
	</form>
</body>
<script>
	$('.age span').on('click', function() {
		$(this).addClass('active').siblings().removeClass('active');
		$('.age input').val($(this).text());
	});

	$('.condition span').on('click', function() {
		$(this).addClass('active').siblings().removeClass('active');
		$('.condition input').val($(this).text());
	});

	$('.page').val(window.location.href);
	$('.submit-btn').on('click', function() {
		var name = $(".name").val();
		var re1 = /^[\u4E00-\u9FA5]{1,6}$/; 
		if(name == ''){
			alert("姓名不能为空"); 
			return false; 
		}else if(name != ''){
			if (!re1.test(name)){ 
				alert("姓名格式不正确"); 
				return false; 
			}	
		}
		
		var phone = $(".phone").val();
		var re3 = /^((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+(\d{8})$/;
		if(phone == ''){
			alert("电话不能为空"); 
			return false; 
		}else if(phone != ''){
			if (!re3.test(phone)){ 
				alert("电话格式不正确"); 
				return false; 
			}
		}
		
		var data = $('form').serializeArray();
		$.post('/tables/tables/add_post',data,function(result){
			//console.log(result);
			alert(result.info);
		});
	});
</script>
</html>