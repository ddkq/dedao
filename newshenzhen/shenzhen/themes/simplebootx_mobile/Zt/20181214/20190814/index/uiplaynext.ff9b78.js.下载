
/*! Txplayer - v3.0.0 - 2019-08-08 17:02:59
 * Copyright (c) 2019
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(214)},214:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(215),h=c(216),i=c(217);Txplayer.apiList;d.prototype={init:function(){this.dataset.playerConfig=this.context.config,this.dataset.nextData=null,this.context.dataset.nextVideoInfo={},this.dataset.nextVideoInfoCopy={},this.context.dataset.nextVid=this.dataset.playerConfig.nextVid,this.dataset.getNextVid="function"===e.type(this.dataset.playerConfig.getNextVid)?this.dataset.playerConfig.getNextVid:e.noop,this.write(),this.addEventListerner(),this.bindBrowserEvent(),this.exportsModuleApis()},write:function(){var a={next:"txp-ui-control-play-next",hideClass:Txplayer.dataset.hideClass,tabindex:Txplayer.dataset.tabindex++,nextTip:"txp-next-tip"};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$buttonsleftmod.append(b),this.dataset.$next=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.next+'"]'),this.dataset.$nextTip=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.nextTip+'"]');var c={tipMod:"txp-next-tip-mod",tipText:"txp-next-tip-text",tipPreview:"txp-next-tip-preview",hideClass:Txplayer.dataset.hideClass},d=e.tmpl(h,c);this.context.$mod.$playermod.append(d),this.dataset.$tipMod=this.context.$mod.$playermod.find('[data-role="'+c.tipMod+'"]'),this.dataset.$tipText=this.dataset.$tipMod.find('[data-role="'+c.tipText+'"]'),this.dataset.$tipPreview=this.dataset.$tipMod.find('[data-role="'+c.tipPreview+'"]');var f={tipContentMod:"txp-next-tip-content-mod",tipContentText:"txp-next-tip-content-text",tipContentCancle:"txp-next-tip-content-cancle",tipContentPlay:"txp-next-tip-content-play",tipContentPoster:"txp-next-tip-content-poster",hideClass:Txplayer.dataset.hideClass},j=e.tmpl(i,f);this.context.$mod.$playermod.append(j),this.dataset.$tipContentMod=this.context.$mod.$playermod.find('[data-role="'+f.tipContentMod+'"]'),this.dataset.$tipContentText=this.dataset.$tipContentMod.find('[data-role="'+f.tipContentText+'"]'),this.dataset.$tipContentCancle=this.dataset.$tipContentMod.find('[data-role="'+f.tipContentCancle+'"]'),this.dataset.$tipContentPlay=this.dataset.$tipContentMod.find('[data-role="'+f.tipContentPlay+'"]'),this.dataset.$tipContentPoster=this.dataset.$tipContentMod.find('[data-role="'+f.tipContentPoster+'"]'),this.initDisplay()},remove:function(){this.dataset.$next.remove(),this.dataset.$tipMod.remove(),this.dataset.$tipContentMod.remove()},initDisplay:function(){1==this.context.dataset.nextVid?(this.dataset.$next.removeClass(Txplayer.dataset.hideClass),this.dataset.$next.removeClass("txp_disabled"),this.writeTips()):0==this.context.dataset.nextVid?(this.dataset.$tipMod.addClass(Txplayer.dataset.hideClass),this.dataset.$nextTip.addClass(Txplayer.dataset.hideClass),this.dataset.$next.addClass(Txplayer.dataset.hideClass)):(this.dataset.$next.removeClass(Txplayer.dataset.hideClass),this.dataset.$next.addClass("txp_disabled"))},writeTips:function(){this.dataset.nextData&&this.dataset.nextData.title&&this.dataset.nextData.preview&&(this.dataset.$tipText.html(f.xss(this.dataset.nextData.title)),this.dataset.$tipContentText.html(f.xss(this.dataset.nextData.title)),this.dataset.$tipPreview.attr("src",this.dataset.nextData.preview)),this.dataset.nextData&&this.dataset.nextData.previewPoster&&this.dataset.$tipContentPoster.css({"background-image":"url("+this.dataset.nextData.previewPoster+")"})},canclePlayTheNext:function(){this.dataset.isCancle=!0,clearTimeout(this.dataset.timer),this.dataset.timer=null,this.dataset.$tipContentMod.addClass(Txplayer.dataset.hideClass)},doPlayTheNext:function(a,b){var c=this;if(this.dataset.$tipContentMod.addClass(Txplayer.dataset.hideClass),c.dataset.nextData.showCountdown)return void c.nofreshDoPlayTheNext(c.dataset.nextVideoInfo,b);try{this.context.userMsg.broadcast("beforePlayNext",{vid:a||c.dataset.nextData.pageUrl})}catch(d){}},nofreshDoPlayTheNext:function(a,b){var c=this;if(11===a.vid.length){try{c.context.userMsg.broadcast("beforePlayNext",{vid:a.vid})}catch(d){}var e={vid:a.vid,nextVid:a.nextVid,bullet:a.bullet,bulletId:a.bulletId,duration:a.duration,playStartTime:a.playStartTime,playEndTime:a.playEndTime,isNeedPay:a.isNeedPay,title:a.title,autoplay:!a.hasOwnProperty("autoplay")||a.autoplay,defaultDefinition:a.defaultDefinition};b.hasOwnProperty("connectionPlayType")&&(e.connectionPlayType=b.connectionPlayType),c.context.msg.broadcast("playControl",e)}},playTheNext:function(a){if(f.showInfo("uiPlayNext.playTheNext",a),a=a||{},1==this.context.dataset.nextVid){var b,c=this,d=this.context.dataset.vid;try{b=c.dataset.orgNextVideoInfo?c.dataset.orgNextVideoInfo:c.dataset.getNextVid(d),c.dataset.nextVideoInfo=b}catch(e){f.showInfo("[playTheNext.getNextVid.error]",e)}if(!b||!b.vid)return void f.showError("\u64ad\u653e\u4e0b\u4e2a\u89c6\u9891\u5931\u8d25","\u627e\u4e0d\u5230vid");if(this.dataset.playNextOptions=a,this.dataset.isPageStopAutoPlay=!1,f.isPageSupportStopAutoPlay()&&"coolOpen"!==this.context.config.playerType){var g=f.isPageHidden(),h=f.isInScreen(this.context.dataset.$playermod);if("undefined"!=typeof g&&g||!h)return void(this.dataset.isPageStopAutoPlay=!0)}if(c.dataset.nextData&&(c.dataset.nextData.pageUrl||c.dataset.nextData.showCountdown)&&a.isAllEnd&&!f.os.ipad)return this.dataset.$tipContentMod.removeClass(Txplayer.dataset.hideClass),this.reportUserAction("play-next-float-view"),this.dataset.timer&&(clearTimeout(this.dataset.timer),this.dataset.timer=null),void(this.dataset.timer=setTimeout(function(){c.dataset.isCancle||c.doPlayTheNext(c.dataset.nextData.pageUrl,a)},1e4));if(c.dataset.nextData&&c.dataset.nextData.pageUrl&&!c.dataset.nextData.showCountdown)try{c.context.userMsg.broadcast("beforePlayNext",{vid:b.pageUrl})}catch(e){}else c.nofreshDoPlayTheNext(b,a),c.context.msg.broadcast("updateNextVideoInfo")}},toggleAutoPlayNext:function(a){if(a){if(this.dataset.isPageStopAutoPlay=!1,this.dataset.nextData&&this.dataset.nextData.pageUrl&&!this.dataset.nextData.showCountdown){try{this.context.userMsg.broadcast("beforePlayNext",{vid:this.dataset.nextVideoInfo.pageUrl})}catch(b){}return}this.nofreshDoPlayTheNext(this.dataset.nextVideoInfo,this.dataset.playNextOptions),this.context.msg.broadcast("updateNextVideoInfo")}},showTip:function(){var a=this;a.dataset.nextData&&a.dataset.nextData.title&&a.dataset.nextData.preview?a.dataset.$tipMod.removeClass(Txplayer.dataset.hideClass):a.dataset.$nextTip.removeClass(Txplayer.dataset.hideClass)},hideTip:function(){var a=this;a.dataset.nextData&&a.dataset.nextData.title&&a.dataset.nextData.preview?a.dataset.$tipMod.addClass(Txplayer.dataset.hideClass):a.dataset.$nextTip.addClass(Txplayer.dataset.hideClass)},bindMouseEvent:function(){var a=this;this.dataset.$next.on("mouseenter",function(b){e(b.relatedTarget).parents().hasClass("txp_btn_next")||a.showTip()}).on("mouseleave",function(b){e(b.relatedTarget).parents().hasClass("txp_btn_next")||a.hideTip()})},addEventListerner:function(){var a=this;this.dataset.$next.on(Txplayer.dataset.clickEventName,function(){a.context.dataset.nextVid&&(a.hideTip(),a.playTheNext({connectionPlayType:3}))}),this.dataset.$tipContentCancle.on(Txplayer.dataset.clickEventName,function(){a.reportUserAction("play-next-float-cancel-click"),a.canclePlayTheNext(),a.context.msg.broadcast("showUicontrol")}),this.dataset.$tipContentPlay.on(Txplayer.dataset.clickEventName,function(){a.reportUserAction("play-next-float-play-click"),a.doPlayTheNext(a.dataset.nextData.pageUrl,{connectionPlayType:3})}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.dataset.isCancle=null,a.dataset.nextData=null,a.dataset.$tipContentMod.addClass(Txplayer.dataset.hideClass)},this.dataset.eventsList[f.getUniqueMsgKey("hideUiControl")]=function(){a.hideTip()},this.dataset.eventsList[f.getUniqueMsgKey("beforeVideoPlay")]=function(){a.canclePlayTheNext(),a.dataset.isCancle=null},this.dataset.eventsList[f.getUniqueMsgKey("userStopVideo")]=function(){a.canclePlayTheNext(),a.dataset.isCancle=null},this.dataset.eventsList[f.getUniqueMsgKey("videoEnd")]=function(b){b.isAllEnd&&a.context.dataset.nextVid&&!a.context.dataset.canPlayTime&&(a.context.dataset.nextVideoInfo.vid||"v3"!=a.context.config.version||a.context.userApi.stop&&a.context.userApi.stop(),a.context.dataset.disableAutoPlayNext||a.context.dataset.isLoopPlay||a.playTheNext({connectionPlayType:2,isAllEnd:!0}))},this.dataset.eventsList[f.getUniqueMsgKey("updateNextVideoInfo")]=function(){var b=!a.context.dataset.isLoopPlay&&!a.context.dataset.disableAutoPlayNext;b?a.context.dataset.nextVideoInfo=a.dataset.nextVideoInfoCopy:a.context.dataset.nextVideoInfo={}},this.dataset.eventsList[f.getUniqueMsgKey("userPlayNext")]=function(b){a.context.dataset.nextVid&&(a.hideTip(),a.playTheNext(b))},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),f.mobile||this.bindMouseEvent()},bindBrowserEvent:function(){var a=this;if(f.isPageSupportStopAutoPlay()&&"coolOpen"!==a.context.config.playerType){f.addPageVisibilityChangeEvent(function(b){a.dataset.isPageStopAutoPlay&&!b&&f.isInScreen(a.context.dataset.$playermod)&&a.toggleAutoPlayNext(!0)});var b;e(window).scroll(function(){clearTimeout(b),b=setTimeout(function(){a.dataset.isPageStopAutoPlay&&f.isInScreen(a.context.dataset.$playermod)&&a.toggleAutoPlayNext(!0)},300)})}},reportUserAction:function(a){this.context.msg.broadcast("reportUsrAction",{usr_action:a})},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.getNextData=function(b,c){return a.dataset.nextData},this.dataset.moduleApis.setNextVid=function(b,c){if(a.context.dataset.nextVid=b.nextVid,1==a.context.dataset.nextVid){var d,e=a.context.dataset.vid;try{d=a.dataset.getNextVid(e)}catch(g){f.showInfo("[playTheNext.getNextVid.error]",g)}d&&(a.dataset.orgNextVideoInfo=d,a.dataset.nextData={vid:e,nextVid:d.vid},d.title&&(a.dataset.nextData.title=d.title),d.preview&&(a.dataset.nextData.preview=d.preview),d.showCountdown&&(a.dataset.nextData.showCountdown=d.showCountdown),d.pageUrl&&(a.dataset.nextData.pageUrl=d.pageUrl),d.previewPoster&&(a.dataset.nextData.previewPoster=d.previewPoster),"v.qq.com"!==location.hostname||f.os.ipad||a.dataset.nextData.pageUrl||a.context.dataset.canPlayTime||a.context.dataset.isLoopPlay?(a.context.dataset.nextVideoInfo={},a.dataset.nextVideoInfoCopy={}):(a.context.dataset.nextVideoInfo.vid=d.vid,a.context.dataset.nextVideoInfo.cid=d.cid||a.context.dataset.cid,a.dataset.nextVideoInfoCopy.vid=d.vid,a.dataset.nextVideoInfoCopy.cid=d.cid||a.context.dataset.cid))}else a.context.dataset.nextVideoInfo={},a.dataset.nextVideoInfoCopy={};a.initDisplay(),a.context.msg.broadcast("updateNextVideoInfo")},e.extend(this.context.userApi,this.dataset.moduleApis),e.each(this.dataset.moduleApis,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiPlayNext",d)},215:function(a,b){a.exports='<txpdiv data-role="<%=next%>" class="txp_btn txp_btn_next" data-report="play-next" aria-label="\u4e0b\u4e00\u96c6">\r\n  <svg class="txp_icon txp_icon_next" version="1.1" viewBox="0 0 36 36">\r\n    <use class="txp_svg_symbol txp_svg_next" xlink:href="<%=svgPrefix%>#txp_svg_next" />\r\n  </svg>\r\n  <txpdiv class="txp_tooltip <%=hideClass%>" data-role="<%=nextTip%>">\u4e0b\u4e00\u96c6</txpdiv>\r\n</txpdiv>'},216:function(a,b){a.exports='<txpdiv class="txp_hint_next <%=hideClass%>" data-role="<%=tipMod%>">\r\n<txpdiv class="txp_next_pic"><img data-role="<%=tipPreview%>" alt="" /></txpdiv>\r\n\t<txpdiv class="txp_next_wording">\r\n\t\t<txpdiv class="txp_label">\u4e0b\u4e00\u4e2a</txpdiv>\r\n\t\t<txpdiv class="txp_next_title" data-role="<%=tipText%>"></txpdiv>\r\n\t</txpdiv>\r\n</txpdiv>\r\n'},217:function(a,b){a.exports='<txpdiv class="txp_overlay_next <%=hideClass%>" data-role="<%=tipContentMod%>">\r\n<div class="txp_next_poster" data-role="<%=tipContentPoster%>" style="background-image:url()"></div>\r\n<txpdiv class="txp_next_content">\r\n\t<txpdiv class="txp_label">\u5373\u5c06\u64ad\u653e</txpdiv>\r\n\t<txpdiv class="txp_next_title" data-role="<%=tipContentText%>"></txpdiv>\r\n\t<a class="txp_cancel" href="javascript:" data-role="<%=tipContentCancle%>">\u53d6\u6d88</a>\r\n\t<button class="txp_btn txp_btn_play_lg" data-status="play" data-role="<%=tipContentPlay%>">\r\n\t\t<svg class="txp_icon txp_icon_play" viewBox="0 0 36 36" >\r\n\t\t\t<use class="txp_svg_symbol txp_svg_play" xlink:href="<%=svgPrefix%>#txp_svg_play" />\r\n\t\t</svg>\r\n\t\t<svg class="txp_icon_cirlce" viewBox="0 0 72 72" >\r\n\t\t\t<circle r="34" cy="36" cx="36"></circle>\r\n\t\t</svg>\r\n\t</button>\r\n</txpdiv>\r\n</txpdiv>'}});